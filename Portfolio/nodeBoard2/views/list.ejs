<!doctype html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <link rel="stylesheet" href="../public/css/main.css" type="text/css">
    <title>NodeBoard</title>
</head>

<body>

    <%- include('userCheck.html') %>

    <div class="container">
        <h1 class="t-h"><a href="/list/1">Node Board</a></h1>
        <table class="table ltable">
            <thead>
                <tr>
                    <th class="col-1">#</th>
                    <th class="col-8">글 제목</th>
                    <th scope="col-1">작성자</th>
                    <th scope="col-1">작성일</th>
                </tr>
            </thead>
            <tbody>
                <% for (var i = 0; i < board.length; i++) { %>
                <tr>
                    <th><%= board[i]._id %></th>
                    <td><a href="/detail/<%= board[i]._id %>"><%= board[i].title %></a></td>
                    <td><%= board[i].writer %></td>
                    <td><%= board[i].date %></td>
                </tr>
                <% } %>
            </tbody>
        </table>
        
        <nav aria-label="Page navigation example">
            <ul class="pagination">
                <% if(page > 1) { %>
                    <li class="page-item"><a class="page-link" href="/list/<%= page -1 %>">Previous</a></li>
                <% } else { %>
                    <li class="page-item"><a class="page-link">Previous</a></li>
                <% } %>

                <% var k = pagenation * 10; console.log(pagenation) %>
                <% for (var i = k+1; i < k + 11; i++) { %>
                    <% if ( maxPage >= i) { %> 
                    <li class="page-item"><a class="page-link <%= page==i ? 'a-on' : '' %>" href="/list/<%= i  %>" active><%= i %></a></li>
                <% }}  %>
    

                
                <% if(page < maxPage) { %>
                <li class="page-item"><a class="page-link" href="/list/<%= page + 1%>">Next</a></li>
                <% } else { %>
                    <li class="page-item"><a class="page-link">Next</a></li>
                <% } %>
                <div class="s-n">
                    <input  id="search-input">
                    <button id="search" class="input-group-append btn btn-dark">검색</button>
                    <button class="btn btn-primary register-btn" onclick="location.href='/register'">글쓰기</button>
                </div>
            </ul>
          </nav>
            
        

       

    </div>


    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <script>
        $('#search').click(function(){
            var inputvalue = $('#search-input').val()
            window.location.replace('/search?value='+ inputvalue)
        });
    </script>
</body>

</html>